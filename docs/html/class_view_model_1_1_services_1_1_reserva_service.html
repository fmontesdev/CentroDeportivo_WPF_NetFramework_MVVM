<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Centro Deportivo: Referencia de la clase ViewModel.Services.ReservaService</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Centro Deportivo<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Centro Deportivo** es una aplicaciÃ³n de escritorio que permite gestionar todas las operaciones diarias de un centro deportivo</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Buscar',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_view_model_1_1_services_1_1_reserva_service.html','','class_view_model_1_1_services_1_1_reserva_service-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Referencia de la clase ViewModel.Services.ReservaService</div></div>
</div><!--header-->
<div class="contents">

<p>Servicio que encapsula la lógica de negocio para la gestión de reservas. Actúa como intermediario entre el <a class="el" href="namespace_view_model.html">ViewModel</a> y el Repositorio, y coordina con otros servicios.  
 <a href="#details">MÃ¡s...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
MÃ©todos pÃºblicos</h2></td></tr>
<tr class="memitem:abf03b817fdf510ba96619ae8894dc7e6" id="r_abf03b817fdf510ba96619ae8894dc7e6"><td class="memItemLeft">&#160;</td><td class="memItemRight"><a class="el" href="#abf03b817fdf510ba96619ae8894dc7e6">ReservaService</a> ()</td></tr>
<tr class="memdesc:abf03b817fdf510ba96619ae8894dc7e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor que inicializa el repositorio de reservas y los servicios relacionados.  <br /></td></tr>
<tr class="memitem:ad475a54c667b8df112f99c4ee052d35f" id="r_ad475a54c667b8df112f99c4ee052d35f"><td class="memItemLeft">async Task&lt; List&lt; <a class="el" href="class_model_1_1_reserva.html">Reserva</a> &gt; &gt;&#160;</td><td class="memItemRight"><a class="el" href="#ad475a54c667b8df112f99c4ee052d35f">ObtenerReservasAsync</a> ()</td></tr>
<tr class="memdesc:ad475a54c667b8df112f99c4ee052d35f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene todas las reservas de la base de datos.  <br /></td></tr>
<tr class="memitem:aaeb89f6c32dcc824c923cad3d4de5b51" id="r_aaeb89f6c32dcc824c923cad3d4de5b51"><td class="memItemLeft">async Task&#160;</td><td class="memItemRight"><a class="el" href="#aaeb89f6c32dcc824c923cad3d4de5b51">CrearReservaAsync</a> (<a class="el" href="class_model_1_1_reserva.html">Reserva</a> reserva)</td></tr>
<tr class="memdesc:aaeb89f6c32dcc824c923cad3d4de5b51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crea una nueva reserva en la base de datos después de validar las reglas de negocio. Verifica que el socio esté activo, que la actividad exista, que no haya reservas duplicadas y que no se exceda el aforo máximo de la actividad.  <br /></td></tr>
<tr class="memitem:a6588faf4a9571fcda10ce343003d166a" id="r_a6588faf4a9571fcda10ce343003d166a"><td class="memItemLeft">async Task&#160;</td><td class="memItemRight"><a class="el" href="#a6588faf4a9571fcda10ce343003d166a">ActualizarReservaAsync</a> (<a class="el" href="class_model_1_1_reserva.html">Reserva</a> reserva)</td></tr>
<tr class="memdesc:a6588faf4a9571fcda10ce343003d166a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actualiza los datos de una reserva existente.  <br /></td></tr>
<tr class="memitem:af7bafc9b8a81cfa8a6b7a83d72d7cbe0" id="r_af7bafc9b8a81cfa8a6b7a83d72d7cbe0"><td class="memItemLeft">async Task&#160;</td><td class="memItemRight"><a class="el" href="#af7bafc9b8a81cfa8a6b7a83d72d7cbe0">EliminarReservaAsync</a> (<a class="el" href="class_model_1_1_reserva.html">Reserva</a> reserva)</td></tr>
<tr class="memdesc:af7bafc9b8a81cfa8a6b7a83d72d7cbe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elimina una reserva de la base de datos.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">DescripciÃ³n detallada</h2>
<div class="textblock"><p>Servicio que encapsula la lógica de negocio para la gestión de reservas. Actúa como intermediario entre el <a class="el" href="namespace_view_model.html">ViewModel</a> y el Repositorio, y coordina con otros servicios. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">DocumentaciÃ³n de constructores y destructores</h2>
<a id="abf03b817fdf510ba96619ae8894dc7e6" name="abf03b817fdf510ba96619ae8894dc7e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf03b817fdf510ba96619ae8894dc7e6">&#9670;&#160;</a></span>ReservaService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ViewModel.Services.ReservaService.ReservaService </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor que inicializa el repositorio de reservas y los servicios relacionados. </p>
<div class="fragment"><div class="line"><span class="lineno">   25</span>        {</div>
<div class="line"><span class="lineno">   26</span>            _reservaRepo = <span class="keyword">new</span> ReservaRepositorio();</div>
<div class="line"><span class="lineno">   27</span>            _socioService = <span class="keyword">new</span> SocioService();</div>
<div class="line"><span class="lineno">   28</span>            _actividadService = <span class="keyword">new</span> ActividadService();</div>
<div class="line"><span class="lineno">   29</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">DocumentaciÃ³n de funciones miembro</h2>
<a id="a6588faf4a9571fcda10ce343003d166a" name="a6588faf4a9571fcda10ce343003d166a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6588faf4a9571fcda10ce343003d166a">&#9670;&#160;</a></span>ActualizarReservaAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task ViewModel.Services.ReservaService.ActualizarReservaAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_model_1_1_reserva.html">Reserva</a></td>          <td class="paramname"><span class="paramname"><em>reserva</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actualiza los datos de una reserva existente. </p>
<dl class="params"><dt>ParÃ¡metros</dt><dd>
  <table class="params">
    <tr><td class="paramname">reserva</td><td><a class="el" href="class_model_1_1_reserva.html" title="Representa una reserva realizada por un socio para una actividad en una fecha especÃ­fica.">Reserva</a> con los datos actualizados</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>Tarea que representa la operación asíncrona</dd></dl>
<dl class="exception"><dt>Excepciones</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>Si la reserva es nula</td></tr>
    <tr><td class="paramname">InvalidOperationException</td><td>Si la reserva no existe</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  103</span>        {</div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">if</span> (reserva == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  105</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(reserva), <span class="stringliteral">&quot;La reserva no puede ser nula&quot;</span>);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>            <span class="comment">// Verificar que la reserva existe</span></div>
<div class="line"><span class="lineno">  108</span>            var reservas = await _reservaRepo.SeleccionarAsync();</div>
<div class="line"><span class="lineno">  109</span>            var reservaExistente = reservas.FirstOrDefault(r =&gt; r.IdReserva == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a1e8b03772be9b81d79d08dd54566b095">IdReserva</a>);</div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">if</span> (reservaExistente == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  111</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;No se puede actualizar. La reserva con ID {reserva.IdReserva} no existe&quot;</span>);</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>            <span class="comment">// Actualizar la reserva en la base de datos</span></div>
<div class="line"><span class="lineno">  114</span>            await _reservaRepo.GuardarAsync();</div>
<div class="line"><span class="lineno">  115</span>        }</div>
<div class="ttc" id="aclass_model_1_1_reserva_html_a1e8b03772be9b81d79d08dd54566b095"><div class="ttname"><a href="class_model_1_1_reserva.html#a1e8b03772be9b81d79d08dd54566b095">Model.Reserva.IdReserva</a></div><div class="ttdeci">int IdReserva</div><div class="ttdoc">Identificador Ãºnico de la reserva.</div><div class="ttdef"><b>Definition</b> Reserva.cs:23</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaeb89f6c32dcc824c923cad3d4de5b51" name="aaeb89f6c32dcc824c923cad3d4de5b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb89f6c32dcc824c923cad3d4de5b51">&#9670;&#160;</a></span>CrearReservaAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task ViewModel.Services.ReservaService.CrearReservaAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_model_1_1_reserva.html">Reserva</a></td>          <td class="paramname"><span class="paramname"><em>reserva</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crea una nueva reserva en la base de datos después de validar las reglas de negocio. Verifica que el socio esté activo, que la actividad exista, que no haya reservas duplicadas y que no se exceda el aforo máximo de la actividad. </p>
<dl class="params"><dt>ParÃ¡metros</dt><dd>
  <table class="params">
    <tr><td class="paramname">reserva</td><td><a class="el" href="class_model_1_1_reserva.html" title="Representa una reserva realizada por un socio para una actividad en una fecha especÃ­fica.">Reserva</a> a crear</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>Tarea que representa la operación asíncrona</dd></dl>
<dl class="exception"><dt>Excepciones</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>Si la reserva es nula</td></tr>
    <tr><td class="paramname">ArgumentException</td><td>Si los datos de la reserva no son válidos o el socio/actividad no existen</td></tr>
    <tr><td class="paramname">InvalidOperationException</td><td>Si ya existe una reserva duplicada o se excede el aforo</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   51</span>        {</div>
<div class="line"><span class="lineno">   52</span>            <span class="comment">// Validaciones de negocio</span></div>
<div class="line"><span class="lineno">   53</span>            ValidarReserva(reserva);</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>            <span class="comment">// Verificar que el socio existe y está activo</span></div>
<div class="line"><span class="lineno">   56</span>            var socios = await _socioService.ObtenerSociosActivosAsync();</div>
<div class="line"><span class="lineno">   57</span>            var socio = socios.FirstOrDefault(s =&gt; s.IdSocio == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#ac91922a4fdc29471bdf0c838b39219f2">IdSocio</a>);</div>
<div class="line"><span class="lineno">   58</span>            <span class="keywordflow">if</span> (socio == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">   59</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;El socio seleccionado no existe o no está activo&quot;</span>);</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>            <span class="comment">// Verificar que la actividad existe</span></div>
<div class="line"><span class="lineno">   62</span>            var actividades = await _actividadService.ObtenerActividadesAsync();</div>
<div class="line"><span class="lineno">   63</span>            var actividad = actividades.FirstOrDefault(a =&gt; a.IdActividad == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a5c1e698fb1a7fc66d6e8c8bbfd478b45">IdActividad</a>);</div>
<div class="line"><span class="lineno">   64</span>            <span class="keywordflow">if</span> (actividad == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">   65</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;La actividad seleccionada no existe&quot;</span>);</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>            <span class="comment">// Obtener todas las reservas para validaciones</span></div>
<div class="line"><span class="lineno">   68</span>            var todasLasReservas = await _reservaRepo.SeleccionarAsync();</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>            <span class="comment">// Verificar que el socio no tiene ya una reserva para la misma actividad en la misma fecha</span></div>
<div class="line"><span class="lineno">   71</span>            var reservaDuplicada = todasLasReservas</div>
<div class="line"><span class="lineno">   72</span>                .FirstOrDefault(r =&gt; r.IdSocio == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#ac91922a4fdc29471bdf0c838b39219f2">IdSocio</a> </div>
<div class="line"><span class="lineno">   73</span>                                   &amp;&amp; r.IdActividad == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a5c1e698fb1a7fc66d6e8c8bbfd478b45">IdActividad</a> </div>
<div class="line"><span class="lineno">   74</span>                                   &amp;&amp; r.Fecha.Date == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a59a06d0854d0dbaff6cdb29b0e1ea64d">Fecha</a>.Date);</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>            <span class="keywordflow">if</span> (reservaDuplicada != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">   77</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(</div>
<div class="line"><span class="lineno">   78</span>                    $<span class="stringliteral">&quot;El socio &#39;{socio.Nombre}&#39; ya tiene una reserva &quot;</span> +</div>
<div class="line"><span class="lineno">   79</span>                    $<span class="stringliteral">&quot;para la actividad &#39;{actividad.Nombre}&#39; en la fecha {reserva.Fecha.Date:dd/MM/yyyy}&quot;</span>);</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>            <span class="comment">// Verificar que no exceda el aforo</span></div>
<div class="line"><span class="lineno">   82</span>            var reservasEnFecha = todasLasReservas</div>
<div class="line"><span class="lineno">   83</span>                .Where(r =&gt; r.IdActividad == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a5c1e698fb1a7fc66d6e8c8bbfd478b45">IdActividad</a> &amp;&amp; r.Fecha.Date == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a59a06d0854d0dbaff6cdb29b0e1ea64d">Fecha</a>.Date)</div>
<div class="line"><span class="lineno">   84</span>                .Count();</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>            <span class="keywordflow">if</span> (reservasEnFecha &gt;= actividad.AforoMaximo)</div>
<div class="line"><span class="lineno">   87</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(</div>
<div class="line"><span class="lineno">   88</span>                    $<span class="stringliteral">&quot;No se puede crear la reserva. La actividad &#39;{actividad.Nombre}&#39; &quot;</span> +</div>
<div class="line"><span class="lineno">   89</span>                    $<span class="stringliteral">&quot;ha alcanzado su aforo máximo ({actividad.AforoMaximo}) para esta fecha&quot;</span>);</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>            <span class="comment">// Crear la reserva en la base de datos</span></div>
<div class="line"><span class="lineno">   92</span>            await _reservaRepo.CrearAsync(reserva);</div>
<div class="line"><span class="lineno">   93</span>        }</div>
<div class="ttc" id="aclass_model_1_1_reserva_html_a59a06d0854d0dbaff6cdb29b0e1ea64d"><div class="ttname"><a href="class_model_1_1_reserva.html#a59a06d0854d0dbaff6cdb29b0e1ea64d">Model.Reserva.Fecha</a></div><div class="ttdeci">System.DateTime Fecha</div><div class="ttdoc">Fecha para la cual se realiza la reserva.</div><div class="ttdef"><b>Definition</b> Reserva.cs:38</div></div>
<div class="ttc" id="aclass_model_1_1_reserva_html_a5c1e698fb1a7fc66d6e8c8bbfd478b45"><div class="ttname"><a href="class_model_1_1_reserva.html#a5c1e698fb1a7fc66d6e8c8bbfd478b45">Model.Reserva.IdActividad</a></div><div class="ttdeci">int IdActividad</div><div class="ttdoc">Identificador de la actividad reservada.</div><div class="ttdef"><b>Definition</b> Reserva.cs:33</div></div>
<div class="ttc" id="aclass_model_1_1_reserva_html_ac91922a4fdc29471bdf0c838b39219f2"><div class="ttname"><a href="class_model_1_1_reserva.html#ac91922a4fdc29471bdf0c838b39219f2">Model.Reserva.IdSocio</a></div><div class="ttdeci">int IdSocio</div><div class="ttdoc">Identificador del socio que realiza la reserva.</div><div class="ttdef"><b>Definition</b> Reserva.cs:28</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7bafc9b8a81cfa8a6b7a83d72d7cbe0" name="af7bafc9b8a81cfa8a6b7a83d72d7cbe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7bafc9b8a81cfa8a6b7a83d72d7cbe0">&#9670;&#160;</a></span>EliminarReservaAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task ViewModel.Services.ReservaService.EliminarReservaAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_model_1_1_reserva.html">Reserva</a></td>          <td class="paramname"><span class="paramname"><em>reserva</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Elimina una reserva de la base de datos. </p>
<dl class="params"><dt>ParÃ¡metros</dt><dd>
  <table class="params">
    <tr><td class="paramname">reserva</td><td><a class="el" href="class_model_1_1_reserva.html" title="Representa una reserva realizada por un socio para una actividad en una fecha especÃ­fica.">Reserva</a> a eliminar</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>Tarea que representa la operación asíncrona</dd></dl>
<dl class="exception"><dt>Excepciones</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>Si la reserva es nula</td></tr>
    <tr><td class="paramname">InvalidOperationException</td><td>Si la reserva no existe</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            <span class="keywordflow">if</span> (reserva == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  127</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(reserva), <span class="stringliteral">&quot;La reserva no puede ser nula&quot;</span>);</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>            <span class="comment">// Verificar que la reserva existe</span></div>
<div class="line"><span class="lineno">  130</span>            var reservas = await _reservaRepo.SeleccionarAsync();</div>
<div class="line"><span class="lineno">  131</span>            var reservaExistente = reservas.FirstOrDefault(r =&gt; r.IdReserva == reserva.<a class="code hl_property" href="class_model_1_1_reserva.html#a1e8b03772be9b81d79d08dd54566b095">IdReserva</a>);</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">if</span> (reservaExistente == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  133</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException($<span class="stringliteral">&quot;No se puede eliminar. La reserva con ID {reserva.IdReserva} no existe&quot;</span>);</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>            await _reservaRepo.EliminarAsync(reserva);</div>
<div class="line"><span class="lineno">  136</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad475a54c667b8df112f99c4ee052d35f" name="ad475a54c667b8df112f99c4ee052d35f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad475a54c667b8df112f99c4ee052d35f">&#9670;&#160;</a></span>ObtenerReservasAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; List&lt; <a class="el" href="class_model_1_1_reserva.html">Reserva</a> &gt; &gt; ViewModel.Services.ReservaService.ObtenerReservasAsync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene todas las reservas de la base de datos. </p>
<dl class="section return"><dt>Devuelve</dt><dd>Lista de todas las reservas registradas</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   36</span>        {</div>
<div class="line"><span class="lineno">   37</span>            <span class="keywordflow">return</span> await _reservaRepo.SeleccionarAsync();</div>
<div class="line"><span class="lineno">   38</span>        }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>La documentaciÃ³n de esta clase estÃ¡ generada del siguiente archivo:<ul>
<li>C:/Users/framo/source/repos/CentroDeportivo/ViewModel/Services/<b>ReservaService.cs</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespace_view_model.html">ViewModel</a></li><li class="navelem"><a href="namespace_view_model_1_1_services.html">Services</a></li><li class="navelem"><a href="class_view_model_1_1_services_1_1_reserva_service.html">ReservaService</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
